<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>one-学习笔记</title>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="javascript:;">Hannahza</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="javascript:;">Home</a>
                </li>
                
                <li>
                    <a href="javascript:;">About</a>
                </li>
                
                <li>
                    <a href="javascript:;">time</a>
                </li>
                
                <li>
                    <a href="javascript:;">Tags</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<header class="intro-header" style="background: url('img/flyme_balloon.jpg')no-repeat 50% 65%;background-size:cover;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="site-heading">
                    <h1>One - 学习笔记</h1>
                    <h2 class="subheading">JavaScript数据类型检测</h2>
                    <span class="meta">Posted by Hannahza on March 30, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container">
                <div id="preview-contents" class="note-content">
                    <div id="wmd-preview" class="preview-content"></div>
                    <div id="wmd-preview-section-29" class="wmd-preview-section preview-content">
                    </div>
<div id="wmd-preview-section-480" class="wmd-preview-section preview-content">
    <h4 id="one-学习笔记">一、JavaScript数据类型</h4>
    <p>＃   JavaScript中如何检测数据类型</p>
    <blockquote>
        <p>在刚开始学习JavaScript时，从《JavaScript高级程序设计》这本书得知检测数据类型是可以用typeof和instanceof这两个操作符，可是用的时候确产生了一些困惑。在这里说一下JavaScript中如何检测数据类型和typeof、instanceof的用法</p>
    </blockquote>
</div>
<div id="wmd-preview-section-5423" class="wmd-preview-section preview-content">
    <h4>typeof 操作符</h4>
    <p>
        typeof 操作符（和 instanceof 一起）或许是 JavaScript 中最大的设计缺陷， 因为几乎不可能从它们那里得到想要的结果。

        尽管 instanceof 还有一些极少数的应用场景，typeof 只有一个实际的应用（这个实际应用是用来检测一个对象是否已经定义或者是否已经赋值）， 而这个应用却不是用来检查对象的类型。
    </p>
    <h4>JavaScript 类型表格 </h4>
    <img src="img/datatype.jpg" alt="All Text">
    </br>
</div>
<div id="wmd-preview-section-5423" class="wmd-preview-section preview-content"></br>
     <p>
        上面表格中，Type 一列表示<code>typeof</code>操作符的运算结果。可以看到，这个值在大多数情况下都返回 "object"。
        Class 一列表示对象的内部属性<code>[[Class]]</code>的值。
        JavaScript 标准文档中定义: <code>[[Class]]</code>的值只可能是下面字符串中的一个： Arguments, Array, Boolean, Date, Error, Function, JSON, Math, Number, Object, RegExp, String.
        为了获取对象的<code>[[Class]]</code>，我们需要使用定义在 Object.prototype 上的方法 toString。
    </p>

    <pre class="prettyprint hljs-light"><code class="language-vbscript-html hljs"><span 
    class="hljs-comment line-number">function is(type, obj) {</span></br><span class="hljs-comment line-number">var clas = Object.prototype.toString.call(obj).slice(8, -1);</span></br><span class="hljs-comment line-number"> return obj !== undefined && obj !== null && clas === type;</span></br></br><span class="hljs-comment line-number">}</span></br><span class="hljs-comment line-number">is('String', 'test'); // true</span></br><span class="hljs-comment line-number">is('String', new String('test')); // true</span></code></pre>
    <p>
        上面例子中，<code>Object.prototype.toString </code>方法被调用，this 被设置为了需要获取<code>[[Class]]</code>值的对象。
        注：Object.prototype.toString 返回一种标准格式字符串，所以上例可以通过 slice 截取指定位置的字符串，如下所示：
    </p> 
    <pre class="prettyprint hljs-light"><code class="language-vbscript-html hljs"><span 
    class="hljs-comment line-number"> Object.prototype.toString.call([])  // "[object Array]"</span></br><span class="hljs-comment line-number">Object.prototype.toString.call({})  // "[object Object]"</span></br><span class="hljs-comment line-number"> Object.prototype.toString.call(2)   // "[object Number]"</span></code></pre>

</div>
<div id="wmd-preview-section-5423" class="wmd-preview-section preview-content">
    <h4>测试为定义变量</h4>
    <pre class="prettyprint hljs-light"><code class="language-vbscript-html hljs"><span 
    class="hljs-comment line-number">typeof foo !== 'undefined'</span></code></pre>
    <p>
        上面代码会检测 foo 是否已经定义；如果没有定义而直接使用会导致 ReferenceError 的异常。 这是 typeof 唯一有用的地方。
    </p>
    <h4>结论</h4>
    <p>
        为了检测一个对象的类型，强烈推荐使用 <code>Object.prototype.toString</code> 方法； 因为这是唯一一个可依赖的方式。正如上面表格所示，typeof 的一些返回值在标准文档中并未定义， 因此不同的引擎实现可能不同。
        除非为了检测一个变量是否已经定义，我们应尽量避免使用 typeof 操作符。
    </p>   
</div>

<div id="wmd-preview-section-5423" class="wmd-preview-section preview-content">
    <h4>instanceof 操作符</h4>
    <p>
        <code>instanceof</code>操作符用来比较两个操作数的构造函数。只有在比较自定义的对象时才有意义。 如果用来比较内置类型，将会和 typeof 操作符 一样用处不大。
    </p>
    <h4>比较自定义对象</h4>
    <pre class="prettyprint hljs-light"><code class="language-vbscript-html hljs"><span 
    class="hljs-comment line-number">function Foo(){}</span></br><span class="hljs-comment line-number">function Bar(){}</span></br><span class="hljs-comment line-number">Bar.prototype=new Foo();</span></br></br><span class="hljs-comment line-number">new Bar() instanceof Bar;//true</span></br><span class="hljs-comment line-number">new Bar() instanceof Foo;//true</span></br></br><span class="hljs-comment line-number">//如果仅仅设置 Bar.prototype 为函数 Foo 本身，而不是 Foo 构造函数的一个实例</span></br><span class="hljs-comment line-number">Bar.prototype = Foo;</span></br><span class="hljs-comment line-number">new Bar() instanceof Foo; // false</span></code></pre>
    
    <h4>instanceof 比较内置类型</h4>
    <pre class="prettyprint hljs-light"><code class="language-vbscript-html hljs"><span 
    class="hljs-comment line-number">new String('foo') instanceof String; // true</span></br><span class="hljs-comment line-number">new String('foo') instanceof Object; // true</span></br></br><span class="hljs-comment line-number">'foo' instanceof String; // false</span></br><span class="hljs-comment line-number">'foo' instanceof Object; // false</span></code></pre>
    
    <p>
        有一点需要注意，instanceof 用来比较属于不同 JavaScript 上下文的对象（比如，浏览器中不同的文档结构）时将会出错， 因为它们的构造函数不会是同一个对象。
    </p>
    <h4>结论</h4>
    <p>      
      instanceof 操作符应该仅仅用来比较来自同一个 JavaScript 上下文的自定义对象。 正如 typeof 操作符一样，任何其它的用法都应该是避免的。
    </p>



   
</div>
</article>
</body>
</html>